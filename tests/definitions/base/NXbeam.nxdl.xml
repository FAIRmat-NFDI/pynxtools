<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<definition category="base" extends="NXobject" name="NXbeam" type="group" xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance">
	<doc>Draft extension of NXbeam to include fields to describe ultra-short pulsed sources and details relevant for photoemission.</doc>
	<symbols>
		<doc>The symbols used in the schema to specify e.g. dimensions of arrays</doc>
		<symbol doc="Number of pixels of the chirp spectrum" name="nx"/>
	</symbols>
	<field name="pulse_energy" type="NX_FLOAT" units="NX_ENERGY">
		<doc>Energy of a single pulse at the diagnostic point</doc>
	</field>
	<field name="average_power" type="NX_FLOAT" units="NX_POWER">
		<doc>Average power at the diagnostic point</doc>
	</field>
	<field name="incident_energy" type="NX_FLOAT" units="NX_ENERGY">
		<doc>In the case of a monchromatic beam this is the scalar energy. Several other use cases are permitted, depending on the presence of other incident_energy_X fields. In the case of a polychromatic beam this is an array of length m of energies, with the relative weights in incident_energy_weights. In the case of a monochromatic beam that varies shot-to-shot, this is an array of energies, one for each recorded shot. Here, incident_energy_weights and incident_energy_spread are not set. In the case of a polychromatic beam that varies shot-to-shot, this is an array of length m with the relative weights in incident_energy_weights as a 2D array. In the case of a polychromatic beam that varies shot-to-shot and where the channels also vary, this is a 2D array of dimensions nP by m (slow to fast) with the relative weights in incident_energy_weights as a 2D array. Note, variants are a good way to represent several of these use cases in a single dataset, e.g. if a calibrated, single-value energy value is available along with the original spectrum from which it was calibrated.</doc>
	</field>
	<field name="incident_energy_spread" type="NX_NUMBER" units="NX_ENERGY">
		<doc>The wavelength spread FWHM for the corresponding energy(ies) in incident_energy. In the case of shot-to-shot variation in the energy spread, this is a 2D array of dimension nP by m (slow to fast) of the spreads of the corresponding wavelength in incident_wavelength.</doc>
	</field>
	<field name="incident_energy_weights" type="NX_NUMBER" units="NX_ENERGY">
		<doc>In the case of a polychromatic beam this is an array of length m of the relative weights of the corresponding energies in incident_energy. In the case of a polychromatic beam that varies shot-to-shot, this is a 2D array of dimensions np by m (slow to fast) of the relative weights of the corresponding energies in incident_energy.</doc>
	</field>
	<field name="incident_wavelength" type="NX_NUMBER" units="NX_WAVELENGTH">
		<doc>In the case of a monchromatic beam this is the scalar wavelength. Several other use cases are permitted, depending on the presence of other incident_wavelength_X fields. In the case of a polychromatic beam this is an array of length m of wavelengths, with the relative weights in incident_wavelength_weights. In the case of a monochromatic beam that varies shot-to-shot, this is an array of wavelengths, one for each recorded shot. Here, incident_wavelength_weights and incident_wavelength_spread are not set. In the case of a polychromatic beam that varies shot-to-shot, this is an array of length m with the relative weights in incident_wavelength_weights as a 2D array. In the case of a polychromatic beam that varies shot-to-shot and where the channels also vary, this is a 2D array of dimensions nP by m (slow to fast) with the relative weights in incident_wavelength_weights as a 2D array. Note, variants are a good way to represent several of these use cases in a single dataset, e.g. if a calibrated, single-value wavelength value is available along with the original spectrum from which it was calibrated.</doc>
	</field>
	<field name="incident_wavelenght_spread" type="NX_NUMBER" units="NX_WAVELENGTH">
		<doc>The wavelength spread FWHM for the corresponding wavelength(s) in incident_wavelength. In the case of shot-to-shot variation in the wavelength spread, this is a 2D array of dimension nP by m (slow to fast) of the spreads of the corresponding wavelenght in incident_wavelenght.</doc>
	</field>
	<field name="incident_wavelength_weights" type="NX_NUMBER" units="NX_WAVELENGTH">
		<doc>In the case of a polychromatic beam this is an array of length m of the relative weights of the corresponding wavelengths in incident_wavelength. In the case of a polychromatic beam that varies shot-to-shot, this is a 2D array of dimensions np by m (slow to fast) of the relative weights of the corresponding wavelengths in incident_wavelength.</doc>
	</field>
	<field name="incident_polarization" type="NX_FLOAT" units="NX_ANY">
		<doc>Incident polarization as a Stokes vector</doc>
		<dimensions rank="1">
			<dim index="1" value="4"/>
		</dimensions>
		<attribute name="units" type="NX_CHAR">
			<doc>The units for this observable are not included in the NIAC list. Responsibility on correct formatting and parsing is handed to the user by using 'NX_ANY'. Correct parsing can still be implemented by using this attribute. Fill with: The unit unidata symbol if the unit has one (Example: 'T' for the unit of magnetic flux density tesla). The unit unidata name if the unit has a name (Example: 'farad' for capacitance). A string describing the units according to unidata unit operation notation, if the unit is a complex combination of named units and does not have a name. Example: for lightsource brilliance (SI) '1/(s.mm2.mrad2)'. Here: SI units are 'V2/m2'.</doc>
		</attribute>
	</field>
	<field name="extent" type="NX_FLOAT" units="NX_LENGTH">
		<doc>Beam size vector describing the beam waist FWHM in two perpendicular directions.</doc>
		<dimensions rank="1">
			<dim index="1" value="2"/>
		</dimensions>
	</field>
	<field name="fluence" type="NX_FLOAT" units="NX_ANY">
		<doc>Incident fluence at the diagnostic point</doc>
	</field>
	<field name="fluence" type="NX_CHAR">
		<attribute name="units" type="NX_CHAR">
			<doc>Here: SI units are 'J/m2', customary 'mJ/cm2'.</doc>
		</attribute>
	</field>
	<field name="pulse_duration" type="NX_FLOAT" units="NX_TIME">
		<doc>FWHM duration of the pulses at the diagnostic point</doc>
	</field>
	<group name="chirp_spectrum" type="NXdata">
		<doc>Spectrum of pulse frequency vs time.</doc>
		<dimensions rank="2">
			<dim index="1" value="nx"/>
			<dim index="1" value="nx"/>
		</dimensions>
	</group>
	<field name="chirp_type" type="NX_CHAR">
		<doc>The type of chirp implemented</doc>
	</field>
	<field name="chirp_GDD" type="NX_FLOAT" units="NX_TIME">
		<doc>Group delay dispersion of the pulse for linear chirp</doc>
	</field>
</definition>
