
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The documentation of the FAIRmat-NeXus definitions & pynxtools
">
      
      
        <meta name="author" content="The NOMAD authors">
      
      
      
        <link rel="prev" href="create-nexus-files-by-python.html">
      
      
        <link rel="next" href="../learn/nexus-primer.html">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Validating NeXus files - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Titillium Web";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="#2A4CDF" data-md-color-accent="#008A67">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#validating-nexus-files" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="header.title">
    <a href="../index.html" title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../assets/nomad-plugin-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Validating NeXus files
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/FAIRmat-NFDI/pynxtools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../assets/nomad-plugin-logo.png" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/FAIRmat-NFDI/pynxtools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/converting-data-to-nexus.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Converting research data to NeXus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/nexus-to-nomad.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uploading NeXus files to NOMAD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-tos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-tos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="writing-an-appdef.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Writing a Simple Application Definition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="using-multiple-appdefs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storing data following multiple appdefs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="transformations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storing experimental geometries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="build-a-plugin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build your own pynxtools plugin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="use-multi-format-reader.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to use the built-in MultiFormatReader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="using-pynxtools-test-framework.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generalized Test Functionality for pynxtools plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="create-nexus-files-by-python.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use python to create NeXus files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Validating NeXus files
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="validate-nexus-file.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Validating NeXus files
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#validation-of-a-nxs-file" class="md-nav__link">
    <span class="md-ellipsis">
      Validation of a .nxs file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validation of a .nxs file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-software" class="md-nav__link">
    <span class="md-ellipsis">
      Validation software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Operating systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pynxtools" class="md-nav__link">
    <span class="md-ellipsis">
      pynxtools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pynxtools-verify_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      pynxtools - verify_nexus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pynxtools - verify_nexus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-of-verify_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Installation of verify_nexus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-verify_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Using verify_nexus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pynxtools-read_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      pynxtools - read_nexus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pynxtools - read_nexus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-of-read_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Installation of read_nexus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-read_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Using read_nexus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cnxvalidate" class="md-nav__link">
    <span class="md-ellipsis">
      cnxvalidate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cnxvalidate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cnxvalidate" class="md-nav__link">
    <span class="md-ellipsis">
      Using cnxvalidate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#punx" class="md-nav__link">
    <span class="md-ellipsis">
      punx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="punx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-punx" class="md-nav__link">
    <span class="md-ellipsis">
      Using punx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#further-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Further notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pynxtools-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      Pynxtools Parsers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feedback-and-contact" class="md-nav__link">
    <span class="md-ellipsis">
      Feedback and contact
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Learn
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Learn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    NeXus
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            NeXus
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learn/nexus-primer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A primer on NeXus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learn/nexus-rules.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rules for storing data in NeXus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learn/multiple-appdefs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiple Application Definitions in NeXus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pynxtools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            pynxtools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learn/dataconverter-and-readers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data conversion in pynxtools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learn/nexus-validation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NeXus validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../learn/multi-format-reader.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The MultiFormatReader as a reader superclass
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/definitions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NeXus definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/cli-api.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API for command line tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/built-in-readers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Built-in readers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/plugins.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#validation-of-a-nxs-file" class="md-nav__link">
    <span class="md-ellipsis">
      Validation of a .nxs file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validation of a .nxs file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation-software" class="md-nav__link">
    <span class="md-ellipsis">
      Validation software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Operating systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pynxtools" class="md-nav__link">
    <span class="md-ellipsis">
      pynxtools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pynxtools-verify_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      pynxtools - verify_nexus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pynxtools - verify_nexus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-of-verify_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Installation of verify_nexus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-verify_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Using verify_nexus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pynxtools-read_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      pynxtools - read_nexus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pynxtools - read_nexus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-of-read_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Installation of read_nexus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-read_nexus" class="md-nav__link">
    <span class="md-ellipsis">
      Using read_nexus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cnxvalidate" class="md-nav__link">
    <span class="md-ellipsis">
      cnxvalidate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="cnxvalidate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-cnxvalidate" class="md-nav__link">
    <span class="md-ellipsis">
      Using cnxvalidate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#punx" class="md-nav__link">
    <span class="md-ellipsis">
      punx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="punx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-punx" class="md-nav__link">
    <span class="md-ellipsis">
      Using punx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#further-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Further notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pynxtools-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      Pynxtools Parsers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feedback-and-contact" class="md-nav__link">
    <span class="md-ellipsis">
      Feedback and contact
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="validating-nexus-files">Validating NeXus files<a class="headerlink" href="#validating-nexus-files" title="Permanent link">&para;</a></h1>
<p>Note: This is a how-to guide for using different tools to validate NeXus files. If you want to learn more about how validation is done in <code>pynxtools</code>, please visit the <a href="../learn/nexus-validation.html">explanation page</a>.</p>
<p><strong>The goal</strong></p>
<p>Use a tool to validate NeXus files to a given set of NeXus definitions:</p>
<ol>
<li>
<p><a href="https://fairmat-nfdi.github.io/nexus_definitions/index.html#">FAIRmat</a></p>
</li>
<li>
<p><a href="https://manual.nexusformat.org/">NIAC</a></p>
</li>
</ol>
<h2 id="validation-of-a-nxs-file">Validation of a .nxs file<a class="headerlink" href="#validation-of-a-nxs-file" title="Permanent link">&para;</a></h2>
<p>The validity of NeXus files is fundamental to ensure FAIR data. Without specific requirements, it is not possible to understand the data. What type of experiment? What Laser Wavelength? Which voltage? What data is represented at all in the table? What is the unit of the value? Which ISO norm does this refer to? Where was this measured? Which year was this measured?</p>
<p>The NeXus application definitions define the minimum set of terms that must be used in an instance of that class (i.e., the required terms that you must add to the file in order to be compliant with that application definition). Application definitions also may define terms that are optional in the NeXus data file. The requirements are set by the community via workshops or at conferences. To initiate or propose changes/additions, you can comment the FAIRMat NeXus proposal by going to the <a href="https://fairmat-nfdi.github.io/nexus_definitions/index.html#">NeXus definitions</a>, and using the hypothes.is tool (sign-up/log-in) to give us some feedback (Red boxes in the image. Expand this panel on the left by clicking on the arrow symbol).<br />
<img alt="image.png" src="attachments/9d748230d54a8059-image.png" /></p>
<p>Oftentimes, there will be errors in a generated NeXus file (be it by hand or automatically): Typos, missing required concepts, missing attributes, using the incorrect datatype or format (e.g., array instad of list, float instead of integer, etc.). Therefore, a validation is required, to ensure that the data you want to share is FAIR.</p>
<p>The NeXus file is valid if it complies with the respective NeXus application definition.</p>
<p>This validation is done by software.</p>
<h3 id="validation-software">Validation software<a class="headerlink" href="#validation-software" title="Permanent link">&para;</a></h3>
<p>There are right now three tools, which can be used for validation of NeXus files. All are different and have individual advantages or disadvantages:</p>
<ol>
<li>
<p>pynxtools </p>
</li>
<li>
<p>cnxvalidate</p>
</li>
<li>
<p>punx</p>
</li>
</ol>
<p>Open software is usually shared on Github - There you find usually the most accurate information, as documentation sometimes lags behind. There you see a box with folders and files. Below is the content of the README.md file displayed. This usually shows instructions for installation and handling of the software.</p>
<p>Here are the GitHub links for the three software packages:</p>
<p><a href="https://github.com/FAIRmat-NFDI/pynxtools">pynxtools</a></p>
<p><a href="https://github.com/nexusformat/cnxvalidate">cnxvalidate</a></p>
<p><a href="https://github.com/prjemian/punx">punx</a></p>
<p>In the following, each package and its capabilities is presented.</p>
<h3 id="operating-systems">Operating systems<a class="headerlink" href="#operating-systems" title="Permanent link">&para;</a></h3>
<p>Almost all PC users are used to Windows as operating system.</p>
<p>A lot of software development is done on Linux as operating system.</p>
<p>This is not a problem for big companies, but for smaller open software projects, which are often developed without funding, this is a problem.</p>
<p>If you are used to Windows, consider setting up a Linux operating system to eliminate problems in the installation process and ensure compatibility.</p>
<h2 id="pynxtools">pynxtools<a class="headerlink" href="#pynxtools" title="Permanent link">&para;</a></h2>
<p>pynxtools = Python Nexus Tools</p>
<p><em><a href="../learn/nexus-validation.html">&gt; learn more about validation in pynxtools &lt;</a></em></p>
<p>This is a python package which is developed by the FAIRmat consortium.</p>
<p>As a python package, this can be used on Linux and Windows systems.</p>
<p>The package can be installed via pip. Therefore you need to have installed:</p>
<ol>
<li>
<p>python</p>
</li>
<li>
<p>pip</p>
</li>
</ol>
<p>For validation purposes, we will use the "read_nexus" and "verify_nexus" command line tools from <code>pynxtools</code>.</p>
<h2 id="pynxtools-verify_nexus">pynxtools - <em>verify_nexus</em><a class="headerlink" href="#pynxtools-verify_nexus" title="Permanent link">&para;</a></h2>
<p>This tool is currently in development. It enables a command like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>verify_nexus C:\nexusvalidation\Raman.nxs
</code></pre></div>
<p>The output warning looks like this:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>...
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>WARNING: Field /entry/instrument/beam_incident/wavelength/@units written without documentation.
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>...
</code></pre></div></p>
<h3 id="installation-of-verify_nexus">Installation of <em>verify_nexus</em><a class="headerlink" href="#installation-of-verify_nexus" title="Permanent link">&para;</a></h3>
<p>The <code>verify_nexus</code> function is currently under development (Aug 2024). Therefore, you have to install pynxtools from its feature branch until this function is published.
Do this to install pynxtools with verify_nexus via;</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>pip install git+https://github.com/FAIRmat-NFDI/pynxtools@hdf-based-validation
</code></pre></div>
<p>Then, you should be able to call its help function:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>verify_nexus --help
</code></pre></div>
<p>with this output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Usage: verify_nexus [OPTIONS] FILE
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>  Verifies a nexus file
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>Options:
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>  --help  Show this message and exit.
</code></pre></div>
<p><em>Development version installation</em></p>
<p>If this installation procedure above does not work, you can use the development installation by using git:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>python -m venv .py39
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>source .py39/bin/activate
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>git clone https://github.com/FAIRmat-NFDI/pynxtools.git
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>cd pynxtools/
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>git checkout hdf-based-validation
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>git submodule sync –recursive
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>git submodule update --init --recursive --jobs=4
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>python -m pip install --upgrade pip
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>python -m pip install -e .
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>python -m pip install -e &quot;.[dev]“
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>verify_nexus --help
</code></pre></div></p>
<h3 id="using-verify_nexus">Using <em>verify_nexus</em><a class="headerlink" href="#using-verify_nexus" title="Permanent link">&para;</a></h3>
<p>Open your terminal. Assuming there is a folder at:</p>
<p>For Linux:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>/home/USER/nexusvalidation
</code></pre></div>
<p>For Windows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>C:\nexusvalidation
</code></pre></div>
<p>Put into this folder your NeXus file, for example this <a href="https://zenodo.org/records/13373909/files/Raman.nxs?download=1">Raman.nxs file</a>.</p>
<p>Use verify_nexus with the command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>verify_nexus C:\nexusvalidation\Raman.nxs
</code></pre></div>
<p>The respective output is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>WARNING: Field /entry/data/spectrum_data_x/@units written without documentation.
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>WARNING: Field /entry/data/spectrum_data_x_Raman/@units written without documentation.
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>WARNING: Field /entry/data/spectrum_data_y/@units written without documentation.
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>WARNING: Field /entry/instrument/beam_incident/wavelength/@units written without documentation.
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>WARNING: Field /entry/instrument/detector_DU970BV/number_of_cycles/@units written without documentation.
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>Invalid: The entry `entry` in file `Raman.nxs` is NOT a valid file according to the `NXraman` application definition.
</code></pre></div>
<h2 id="pynxtools-read_nexus">pynxtools - <em>read_nexus</em><a class="headerlink" href="#pynxtools-read_nexus" title="Permanent link">&para;</a></h2>
<p>While <code>verify_nexus´ is used as a straightforward tool for validating a NeXus file,</code>read_nexus` outputs a debug log for a given NeXus file by annotating the data and metadata entries with the schema definitions from the respective NeXus base classes and application definitions to which the file refers to. This can be helpful to extract documentation and understand the concept defined in the NeXus application definition.
The command used is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>read_nexus -f NXopt_minimal_example.nxs
</code></pre></div>
<p>The output looks like this, if the respective entry is found:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>DEBUG: ===== FIELD (//entry/experiment_type): &lt;HDF5 dataset &quot;experiment_type&quot;: shape (), type &quot;|O&quot;&gt;
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>DEBUG: value: b&#39;transmission spectroscopy&#39; 
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>DEBUG: classpath: [&#39;NXentry&#39;, &#39;NX_CHAR&#39;]
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>DEBUG: classes:
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>NXoptical_spectroscopy.nxdl.xml:/ENTRY/experiment_type
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>DEBUG: &lt;&lt;REQUIRED&gt;&gt;
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>DEBUG: enumeration (NXoptical_spectroscopy.nxdl.xml:/ENTRY/experiment_type):
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>DEBUG: -&gt; photoluminescence
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>DEBUG: -&gt; transmission spectroscopy
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>DEBUG: -&gt; reflection spectroscopy
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>DEBUG: -&gt; other
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>DEBUG: documentation (NXoptical_spectroscopy.nxdl.xml:/ENTRY/experiment_type):
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>DEBUG: 
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>                 Specify the type of the optical experiment.
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>                 Chose other if none of these methods are suitable. You may specify
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>                 fundamental characteristics or properties in the experimental sub-type.
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>                 For Raman spectroscopy or ellipsometry use the respective specializations
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>                 of NXoptical_spectroscopy.
</code></pre></div>
<p>or like this, if the respective entry is not found in the defintion:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>DEBUG: ===== ATTRS (//entry/instrument/software_RC2/program@url)
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>DEBUG: value: https://www.jawoollam.com/ellipsometry-software/completeease 
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>DEBUG: classpath: [&#39;NXentry&#39;, &#39;NXinstrument&#39;]
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>DEBUG: NOT IN SCHEMA
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>DEBUG:
</code></pre></div>
<p>The first example was for for "experiment_type" entry in the "NXoptical_spectroscopy" definition.</p>
<p>The second example was for the "software_TYPE" attribute @URL entry in the "NXoptical_spectroscopy" definition. Here the problem was that "url" was used instead of "URL".</p>
<h3 id="installation-of-read_nexus">Installation of <em>read_nexus</em><a class="headerlink" href="#installation-of-read_nexus" title="Permanent link">&para;</a></h3>
<p>This is installed with pip:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>pip install pynxtools
</code></pre></div>
<h3 id="using-read_nexus">Using <em>read_nexus</em><a class="headerlink" href="#using-read_nexus" title="Permanent link">&para;</a></h3>
<p>Open your terminal. Assuming there is a folder at:</p>
<p>For Linux:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>/home/USER/nexusvalidation
</code></pre></div>
<p>For Windows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>C:\nexusvalidation
</code></pre></div>
<p>Put into this folder your NeXus file, for example the <a href="https://zenodo.org/records/13373909/files/Raman.nxs?download=1">Raman.nxs file</a>.</p>
<p>Then use:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>read_nexus -f C:\nexusvalidation\Raman.nxs
</code></pre></div>
<p>shows the output like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>===== FIELD (//entry/data/spectrum_data_y): &lt;HDF5 dataset &quot;spectrum_data_y&quot;: shape (1600,), type &quot;&lt;f8&quot;&gt;
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>DEBUG: ===== FIELD (//entry/data/spectrum_data_y): &lt;HDF5 dataset &quot;spectrum_data_y&quot;: shape (1600,), type &quot;&lt;f8&quot;&gt;
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>value: [ 288.5499878  289.         288.4500122 ... 1875.        1889.349976 ...
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>DEBUG: value: [ 288.5499878  289.         288.4500122 ... 1875.        1889.349976 ...
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>Dataset referenced as NXdata SIGNAL
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>DEBUG: Dataset referenced as NXdata SIGNAL
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>===== ATTRS (//entry/data/spectrum_data_y@long_name)
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>DEBUG: ===== ATTRS (//entry/data/spectrum_data_y@long_name)
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>value: Raman Intensity 
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>DEBUG: value: Raman Intensity 
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>Dataset referenced as NXdata SIGNAL
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>DEBUG: Dataset referenced as NXdata SIGNAL
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>===== ATTRS (//entry/data/spectrum_data_y@units)
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>DEBUG: ===== ATTRS (//entry/data/spectrum_data_y@units)
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>value: counts 
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>DEBUG: value: counts 
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>DEBUG: 
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>For Axis #0, 1 axes have been identified: [&lt;HDF5 dataset &quot;spectrum_data_x_Raman&quot;: shape (1600,), type &quot;&lt;f8&quot;&gt;]
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>DEBUG: For Axis #0, 1 axes have been identified: [&lt;HDF5 dataset &quot;spectrum_data_x_Raman&quot;: shape (1600,), type &quot;&lt;f8&quot;&gt;]
</code></pre></div>
<p>Search for fields which are not found in the NeXus definition by searching for the line: "DEBUG: NOT IN SCHEMA". Recheck the used NeXus definition to eliminate the problem. Be careful with upper and lower case notation and correct spelling.</p>
<p>Keep in mind that the output provides quite some information. This is useful for software development, but may be a bit too much for validation purposes.</p>
<h2 id="cnxvalidate">cnxvalidate<a class="headerlink" href="#cnxvalidate" title="Permanent link">&para;</a></h2>
<p>This package is written in C. It is allows a command line evocation like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>nxvalidate -l appdefdir datafile
</code></pre></div>
<ol>
<li>
<p>nxvalidate: calls the software function</p>
</li>
<li>
<p>-l appdefdir: points to the location of the NeXus definitions you want to use. This is a path to a folder called "defintions".</p>
</li>
<li>
<p>datafile: This is the path to the .nxs file which should be checked.</p>
</li>
</ol>
<p>This output shows warnings like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required attribute URL missing&quot; nxdlPath=/NXentry/definition sev=error dataPath=/entry/definition dataFile=NXopt_minimal_example.nxs
</code></pre></div>
<p>and indicates the entry of the .nxs file, which is incorrect and what the respective problem is. It also points to the NeXus definition (.nxdl.xml file), in which this conflict was found.</p>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p>Note: You can find more information about installing nxvalidate <a href="installation_notes_nxvalidate.html">here</a>. Note that installation on Windows can be tricky because cmake can sometimes not find the libxml2 library. Though, if you solve this, this maybe work on windows).</p>
<p>Therefore: Use linux.</p>
<p>The software has to be built from source. This is eased significantly by using another software called: cmake.</p>
<p><strong>Install cmake, github, hdf5 &amp; xml2 library, etc:</strong></p>
<p>Open the terminal and install all parts required to install cnxvalidate via cmake:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>sudo apt-get update
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>sudo apt-get install git
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>sudo apt-get install build-essential
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>sudo add-apt-repository universe
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>sudo apt-get install libhdf5-serial-dev
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>sudo apt-get -y install pkg-config     
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>sudo apt upgrade -y
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>sudo apt-get -y install cmake
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>sudo apt-get install libxml2-dev
</code></pre></div>
<p><strong>Directory location</strong></p>
<p>Create a folder named "nexusvalidation" via terminal or file manager.</p>
<p>The folder is located at <code>/home/USER/nexusvalidation</code></p>
<p>"USER" is your user name. (You can get your username by the terminal command: <code>echo $USER</code>)</p>
<p>In the terminal, this is indicated by <code>~/nexusvalidation</code> ( \~ = /home/USER)</p>
<p>Open the thermal and go into this directory by:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>cd /home/USER/nexusvalidation
</code></pre></div>
<p><strong>Using GitHub</strong></p>
<p>Go to the <a href="https://github.com/nexusformat/cnxvalidate">Github Repository of cnxvalidate:</a></p>
<p>Click on the green "&lt;&gt; Code" button.</p>
<p>Click on "HTTPS".</p>
<p>Copy the https link.</p>
<p><img alt="image.png" src="attachments/e28ec15bb537c9b7-image.png" /></p>
<p>Open the terminal and ensure you are in the <code>nexusvalidation</code> folder.</p>
<p>Clone the github repository (= download the files of the software).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>git clone https://github.com/nexusformat/cnxvalidate.git
</code></pre></div>
<p>now you have a new folder at <code>~/nexusvalidation/cnxvalidate</code></p>
<p>go into this folder via the command</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>cd cnxvalidate
</code></pre></div>
<p>now you are in the source tree. This should be exactly the same files, which you find on the github repository <a href="https://github.com/nexusformat/cnxvalidate">github repository</a></p>
<p>make a new directory called "build":</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>mkdir build
</code></pre></div>
<p>go into this directory</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>cd build
</code></pre></div>
<p>use cmake, to compile/build the software - this puts together all pieces of software - and especially external parts such as xml2 and hdf5 library.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>cmake ../
</code></pre></div>
<p>install cnxvalidate after it was sucessfully build</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>make
</code></pre></div>
<p>Now the above mentioned commands should be avaialble. The programm/executable is located at:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>/home/USER/nexusvalidation/cnxvalidate/build/nxvalidate
</code></pre></div>
<h3 id="using-cnxvalidate">Using cnxvalidate<a class="headerlink" href="#using-cnxvalidate" title="Permanent link">&para;</a></h3>
<p>Now you can start to validate your created <a href="https://zenodo.org/records/13373909">NeXus file</a>. But before the validation, we need to get a set of NeXus definitions, which we want to use as reference. This is done again by using git:</p>
<p><strong>Getting NeXus definitions</strong></p>
<p>go to the folder nexusvalidation</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>cd /home/USER/nexusvalidation
</code></pre></div>
<p>Download a set of NeXus definitions. Choose only one:</p>
<p>For FAIRmat NeXus definitions, go to <a href="https://github.com/FAIRmat-NFDI/nexus_definitions">this link</a> and copy the github "Code" line to clone the repository. Then:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>git clone https://github.com/FAIRmat-NFDI/nexus_definitions.git
</code></pre></div>
<p>For the NIAC NeXus definitions, go to <a href="https://github.com/nexusformat/definitions">this link</a> and copy the github "Code" line to clone the repository. Then:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>git clone https://github.com/nexusformat/definitions.git
</code></pre></div>
<p>Now you have a folder called "definitions" in the "nexusvalidation" folder. The path to this definitions folder is used as option for cnxvalidate, to tell the program which NeXus definitions shall be used.</p>
<p>The respective path would be:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>/home/USER/nexusvalidation/definitions
</code></pre></div>
<p><strong>Get your NeXus file</strong></p>
<p>put one of created NeXus file (or this <a href="https://zenodo.org/records/13373909/files/NXopt_minimal_example.nxs?download=1">this file</a>) into the "nexusvalidation" folder (filemanager/explorer).</p>
<p>The file should now be loacted at (assumed the file name is "NXopt_minimal_example.nxs")</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>/home/USER/nexusvalidation/NXopt_minimal_example.nxs
</code></pre></div>
<p><strong>Validating the NeXus file</strong></p>
<p>now you can use the cnxvalidate with the executable called "nxvalidate" to use the set of NeXus definitions called "appdefdir" to validate the NeXus file called "datafile". This is done from the terminal.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>nxvalidate -l appdefdir datafile
</code></pre></div>
<p>All names are "paths" to the definition, application or file. Use the "full path", if you are not experienced, but relative paths work as well.</p>
<p>For the provided example, the suitable command looks like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>/home/USER/nexusvalidation/cnxvalidate/build/nxvalidate -l /home/USER/nexusvalidation/definitions /home/USER/nexusvalidation/NXopt_minimal_example.nxs
</code></pre></div>
<p>The "-l" option tells the program, that it should look for the nexus definiton at the path after "-l".</p>
<p>For the proved file above, the output should look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>USER@XXX:/home/USER/nexusvalidation/cnxvalidate/build/nxvalidate -l /home/USER/nexusvalidation/definitions /home/USER/nexusvalidation/NXopt_minimal_example.nxs
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required attribute version missing&quot; nxdlPath=/NXentry/definition sev=error dataPath=/entry/definition dataFile=NXopt_minimal_example.nxs 
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required attribute URL missing&quot; nxdlPath=/NXentry/definition sev=error dataPath=/entry/definition dataFile=NXopt_minimal_example.nxs 
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required field missing&quot; nxdlPath=/NXentry/experiment_type sev=error dataPath=/entry/experiment_type dataFile=NXopt_minimal_example.nxs 
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required group missing&quot; nxdlPath=/NXentry/NXinstrument sev=error dataPath=/entry dataFile=NXopt_minimal_example.nxs 
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required group missing&quot; nxdlPath=/NXentry/NXsample sev=error dataPath=/entry dataFile=NXopt_minimal_example.nxs 
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>definition=NXoptical_spectroscopy.nxdl.xml message=&quot;Required group missing&quot; nxdlPath=/NXentry/NXdata sev=error dataPath=/entry dataFile=NXopt_minimal_example.nxs 
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>9 errors and 11 warnings found when validating NXopt_minimal_example.nxs
</code></pre></div>
<p>The errors tell you now which things are missing (message="Required group missing"), if there is a field missing (message="Required field missing"), or if an attribute is missing (message="Required attribute URL missing" - here for example the attribute named URL)</p>
<p>Now adjust the file creation, and add the respective fields to make your NeXus file compliant with the NeXus definitions. This way, you can ensure that your data is FAIR, which is then ready for sharing and publication.</p>
<h2 id="punx">punx<a class="headerlink" href="#punx" title="Permanent link">&para;</a></h2>
<p><em>punx - Python Utilities for NeXus HDF5 files</em></p>
<p>This is python package, and can therefore be used on Linux and Windows systems.</p>
<p>The package can be installed via pip. Therefore you need to have installed:</p>
<ol>
<li>
<p>python</p>
</li>
<li>
<p>pip</p>
</li>
</ol>
<p>You can then evoke a command like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>punx validate [-h] [--report REPORT] infile
</code></pre></div>
<p>"validate" tells the program that we want to validate a file</p>
<p>"[-h]" tells the program to show the help message</p>
<p>"[--report REPORT]" tells the program what findings should be reported.<br />
This is done by replacing REPORT with ={COMMENT,ERROR,NOTE,OK,TODO,UNUSED,WARN}</p>
<p><a href="https://punx.readthedocs.io/en/latest/validate.html#validate">Official docs</a></p>
<h3 id="installation_1">Installation<a class="headerlink" href="#installation_1" title="Permanent link">&para;</a></h3>
<p>Open the terminal and install punx via pip:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>pip install punx
</code></pre></div>
<p>This software is based on other powerful software packages or libraries, therefore as well other packages have to be installed:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>pip install h5py
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>pip install lxml
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>pip install numpy
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>pip install PyQt5
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>pip install requests
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>pip install pyRestTable
</code></pre></div>
<p>Then you should be able to test the package by:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>punx demo
</code></pre></div>
<p>The output should look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>C:\&gt;punx demo
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>!!! WARNING: this program is not ready for distribution.
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>console&gt; punx validate C:\Users\USER\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\punx\data\writer_1_3.hdf5
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>data file: C:\Users\USER\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\punx\data\writer_1_3.hdf5
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>NeXus definitions: main, dated 2024-01-02 03:04:05, sha=xxxx21fxcef02xfbaa6x04e182e3d67dace7ef1b
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>findings
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a>============================ ======== ==================================== ==========================================================
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>address                      status   test                                 comments
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>============================ ======== ==================================== ==========================================================
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a>/                            TODO     NeXus base class                     NXroot: more validations needed
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>/                            OK       known NXDL                           NXroot: recognized NXDL specification
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>/                            OK       NeXus base class                     NXroot: known NeXus base class
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a>/                            OK       NeXus default plot                   found by v3: /Scan/data/counts
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a>/                            OPTIONAL NXDL group in data file              not found:  in //entry
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a>/Scan                        TODO     NeXus base class                     NXentry: more validations needed
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a>/Scan                        OK       group in base class                  not defined: NXroot/Scan
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a>/Scan                        OK       known NXDL                           NXentry: recognized NXDL specification
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a>/Scan                        OK       NeXus base class                     NXentry: known NeXus base class
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a>/Scan                        OK       NXDL group in data file              found:  in /Scan/data
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a>/Scan                        NOTE     validItemName                        relaxed pattern: [a-zA-Z0-9_]([a-zA-Z0-9_.]*[a-zA-Z0-9_])?
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a>/Scan                        OPTIONAL NXDL field in data file              not found: /Scan/collection_description
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a>/Scan                        OPTIONAL NXDL field in data file              not found: /Scan/collection_identifier
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a>/Scan                        OPTIONAL NXDL field in data file              not found: /Scan/collection_time
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a>/Scan                        OPTIONAL NXDL field in data file              not found: /Scan/definition
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a>/Scan                        OPTIONAL NXDL field in data file              not found: /Scan/definition_local
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a>...
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a>...
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a>...
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a>/Scan/data@signal            OK       known attribute                      known: NXdata@signal
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a>/Scan/data@signal            OK       value of @signal                     found: /Scan/data/counts
<a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a>/Scan/data@signal            OK       NeXus default plot v3, NXdata@signal correct default plot setup in /NXentry/NXdata
<a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a>/Scan/data@two_theta_indices TODO     attribute value                      implement
<a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a>/Scan/data@two_theta_indices OK       validItemName                        strict pattern: [a-z_][a-z0-9_]*
<a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a>/Scan/data@two_theta_indices OK       known attribute                      unknown: NXdata@two_theta_indices
<a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a>/Scan/data/counts            OK       validItemName                        strict pattern: [a-z_][a-z0-9_]*
<a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a>/Scan/data/counts            OK       field in base class                  not defined: NXdata/counts
<a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a>/Scan/data/counts@units      TODO     attribute value                      implement
<a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a>/Scan/data/counts@units      OK       validItemName                        strict pattern: [a-z_][a-z0-9_]*
<a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a>/Scan/data/two_theta         OK       validItemName                        strict pattern: [a-z_][a-z0-9_]*
<a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a>/Scan/data/two_theta         OK       field in base class                  not defined: NXdata/two_theta
<a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a>/Scan/data/two_theta@units   TODO     attribute value                      implement
<a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a>/Scan/data/two_theta@units   OK       validItemName                        strict pattern: [a-z_][a-z0-9_]*
<a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a>============================ ======== ==================================== ==========================================================
<a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a>
<a id="__codelineno-41-49" name="__codelineno-41-49" href="#__codelineno-41-49"></a>
<a id="__codelineno-41-50" name="__codelineno-41-50" href="#__codelineno-41-50"></a>summary statistics
<a id="__codelineno-41-51" name="__codelineno-41-51" href="#__codelineno-41-51"></a>======== ===== =========================================================== =========
<a id="__codelineno-41-52" name="__codelineno-41-52" href="#__codelineno-41-52"></a>status   count description                                                 (value)
<a id="__codelineno-41-53" name="__codelineno-41-53" href="#__codelineno-41-53"></a>======== ===== =========================================================== =========
<a id="__codelineno-41-54" name="__codelineno-41-54" href="#__codelineno-41-54"></a>OK       35    meets NeXus specification                                   100
<a id="__codelineno-41-55" name="__codelineno-41-55" href="#__codelineno-41-55"></a>NOTE     1     does not meet NeXus specification, but acceptable           75
<a id="__codelineno-41-56" name="__codelineno-41-56" href="#__codelineno-41-56"></a>WARN     0     does not meet NeXus specification, not generally acceptable 25
<a id="__codelineno-41-57" name="__codelineno-41-57" href="#__codelineno-41-57"></a>ERROR    0     violates NeXus specification                                -10000000
<a id="__codelineno-41-58" name="__codelineno-41-58" href="#__codelineno-41-58"></a>TODO     7     validation not implemented yet                              0
<a id="__codelineno-41-59" name="__codelineno-41-59" href="#__codelineno-41-59"></a>UNUSED   0     optional NeXus item not used in data file                   0
<a id="__codelineno-41-60" name="__codelineno-41-60" href="#__codelineno-41-60"></a>COMMENT  0     comment from the punx source code                           0
<a id="__codelineno-41-61" name="__codelineno-41-61" href="#__codelineno-41-61"></a>OPTIONAL 40    allowed by NeXus specification, not identified              99
<a id="__codelineno-41-62" name="__codelineno-41-62" href="#__codelineno-41-62"></a>         --
<a id="__codelineno-41-63" name="__codelineno-41-63" href="#__codelineno-41-63"></a>TOTAL    83
<a id="__codelineno-41-64" name="__codelineno-41-64" href="#__codelineno-41-64"></a>======== ===== =========================================================== =========
<a id="__codelineno-41-65" name="__codelineno-41-65" href="#__codelineno-41-65"></a>
<a id="__codelineno-41-66" name="__codelineno-41-66" href="#__codelineno-41-66"></a>&lt;finding&gt;=99.144737 of 76 items reviewed
<a id="__codelineno-41-67" name="__codelineno-41-67" href="#__codelineno-41-67"></a>NeXus definitions version: main
<a id="__codelineno-41-68" name="__codelineno-41-68" href="#__codelineno-41-68"></a>
<a id="__codelineno-41-69" name="__codelineno-41-69" href="#__codelineno-41-69"></a>console&gt; punx tree C:\Users\rh83hixu\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\punx\data\writer_1_3.hdf5
<a id="__codelineno-41-70" name="__codelineno-41-70" href="#__codelineno-41-70"></a>C:\Users\rh83hixu\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\LocalCache\local-packages\Python310\site-packages\punx\data\writer_1_3.hdf5 : NeXus data file
<a id="__codelineno-41-71" name="__codelineno-41-71" href="#__codelineno-41-71"></a>  Scan:NXentry
<a id="__codelineno-41-72" name="__codelineno-41-72" href="#__codelineno-41-72"></a>    @NX_class = &quot;NXentry&quot;
<a id="__codelineno-41-73" name="__codelineno-41-73" href="#__codelineno-41-73"></a>    data:NXdata
<a id="__codelineno-41-74" name="__codelineno-41-74" href="#__codelineno-41-74"></a>      @NX_class = &quot;NXdata&quot;
<a id="__codelineno-41-75" name="__codelineno-41-75" href="#__codelineno-41-75"></a>      @axes = &quot;two_theta&quot;
<a id="__codelineno-41-76" name="__codelineno-41-76" href="#__codelineno-41-76"></a>      @signal = &quot;counts&quot;
<a id="__codelineno-41-77" name="__codelineno-41-77" href="#__codelineno-41-77"></a>      @two_theta_indices = [0]
<a id="__codelineno-41-78" name="__codelineno-41-78" href="#__codelineno-41-78"></a>      counts:NX_INT32[31] = [1037, 1318, 1704, &#39;...&#39;, 1321]
<a id="__codelineno-41-79" name="__codelineno-41-79" href="#__codelineno-41-79"></a>        @units = &quot;counts&quot;
<a id="__codelineno-41-80" name="__codelineno-41-80" href="#__codelineno-41-80"></a>      two_theta:NX_FLOAT64[31] = [17.92608, 17.92591, 17.92575, &#39;...&#39;, 17.92108]
<a id="__codelineno-41-81" name="__codelineno-41-81" href="#__codelineno-41-81"></a>        @units = &quot;degrees&quot;
</code></pre></div>
<p>Then you should be able to use this package.</p>
<p>Official docs for <a href="https://punx.readthedocs.io/en/latest/install.html">punx installation</a></p>
<h3 id="using-punx">Using punx<a class="headerlink" href="#using-punx" title="Permanent link">&para;</a></h3>
<p>Open your terminal. Assuming there is a folder at:</p>
<p>For Linux:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>/home/USER/nexusvalidation
</code></pre></div>
<p>For Windows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>C:\nexusvalidation
</code></pre></div>
<p>Put a NeXus file into this folder. For example, the file: <a href="https://zenodo.org/records/13373909/files/SiO2onSi.ellips.nxs?download=1">SiO2onSi.ellips.nxs</a>.</p>
<p>then the command is (for Windows):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>punx validate C:\nexusvalidation\SiO2onSi.ellips.nxs
</code></pre></div>
<p>For Linux:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>punx validate C:\nexusvalidation\SiO2onSi.ellips.nxs
</code></pre></div>
<p>The output tables "findings" and "summary statistics" can be used to find error present in the NeXus file.</p>
<p><strong>Which NeXus definition?</strong></p>
<p>The program selects the NeXus definitions (set of nxdl.xml files) by itself. It can in principle also be modified with different repositories. The functionality to add a new repository is right now not possible (Aug 2024).</p>
<p>Therefore, only the NIAC repository as NeXus definitions is functional.</p>
<p>You may update the repository for the lastest version via:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>punx install
</code></pre></div>
<p>The NeXus respective definitions are found here:</p>
<p><a href="https://manual.nexusformat.org/classes/index.html">NIAC NeXus definitions</a></p>
<p>Search on the right side under "quick search" for "NXopt":</p>
<p><a href="https://manual.nexusformat.org/classes/contributed_definitions/NXopt.html#index-0">NXopt NeXus definition</a></p>
<p>This python code creates the respective python file with all required fields:</p>
<p><a href="https://zenodo.org/records/13373909/files/NXopt_minimal_example_NIAC_NeXus_Def.nxs?download=1">NXopt_minimal_example_NIAC_NeXus_Def.nxs</a></p>
<p>Here is the python code:</p>
<p><a href="https://zenodo.org/records/13373909/files/h5py_nexus_file_creation_NIAC_NeXus_Def.py?download=1">h5py_nexus_file_creation_NIAC_NeXus_Def.py</a></p>
<p>The command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>punx validate --report ERROR C:\nexusvalidation\NXopt_minimal_example_NIAC_NeXus_Def.nxs
</code></pre></div>
<p>then gives this output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>findings
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>======= ====== ========== ======================================
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>address status test       comments                              
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>======= ====== ========== ======================================
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>/entry  ERROR  known NXDL NXopt: unrecognized NXDL specification
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>======= ====== ========== ======================================
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>summary statistics
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>======== ===== =========================================================== =========
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>status   count description                                                 (value)  
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a>======== ===== =========================================================== =========
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>OK       148   meets NeXus specification                                   100      
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>NOTE     0     does not meet NeXus specification, but acceptable           75       
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a>WARN     0     does not meet NeXus specification, not generally acceptable 25       
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a>ERROR    1     violates NeXus specification                                -10000000
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a>TODO     16    validation not implemented yet                              0        
<a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>UNUSED   0     optional NeXus item not used in data file                   0        
<a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a>COMMENT  0     comment from the punx source code                           0        
<a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a>OPTIONAL 213   allowed by NeXus specification, not identified              99       
<a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>         --                                                                         
<a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a>TOTAL    378                                                                        
<a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a>======== ===== =========================================================== =========
</code></pre></div>
<p>The last error message:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>======= ====== ========== ======================================
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>/entry  ERROR  known NXDL NXopt: unrecognized NXDL specification
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>======= ====== ========== ======================================
</code></pre></div>
<p>can be ignored and is a bug right now. If this is the only Error message, then your NeXus file is compliant with the NeXus definitions and you can share and publish your data.</p>
<h3 id="further-notes">Further notes<a class="headerlink" href="#further-notes" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Punx only uses the NeXus definiton from the NIAC <a href="https://manual.nexusformat.org/">NeXus definiton from the NIAC</a>. The use of the <a href="https://fairmat-nfdi.github.io/nexus_definitions/index.html#">FAIRmat NeXus definition</a> is not possible right now.</p>
</li>
<li>
<p><a href="https://punx.readthedocs.io/en/latest/overview.html#">Other punx commands are availble</a></p>
</li>
<li>
<p><a href="https://punx.readthedocs.io/en/latest/install.html">More details for installation</a></p>
</li>
<li>
<p><a href="https://github.com/prjemian/punx">Github project</a></p>
</li>
</ol>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>This tutorial showed:</p>
<ol>
<li>
<p>3 different tools for NeXus file validation</p>
</li>
<li>
<p>How to install these tools</p>
</li>
<li>
<p>How to use them via Examples</p>
</li>
</ol>
<h3 id="recommended-workflow">Recommended workflow<a class="headerlink" href="#recommended-workflow" title="Permanent link">&para;</a></h3>
<p>As pynxtools verify_nexus method is right now in development, <a href="testing-validation-tools.html">not all situations are covered right now</a>. Therefore, the most reliable method right now is a combination of <em>Human Manual Validation</em> + <em>Software solutions</em>.</p>
<h3 id="pynxtools-parsers">Pynxtools Parsers<a class="headerlink" href="#pynxtools-parsers" title="Permanent link">&para;</a></h3>
<p>For a specifically structured set of data, a parser can be written, which uses the meta data and a pre-structured meta data file, to create a NeXus file. Tough, the parser depends on: Experimental Technique and Setup and has therefore to be written individually. Take a look <a href="../reference/plugins.html">here</a>.</p>
<h3 id="feedback-and-contact">Feedback and contact<a class="headerlink" href="#feedback-and-contact" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Best way is to contact the software development team directly via a <a href="https://github.com/FAIRmat-NFDI/pynxtools/issues/new">Github Issue</a>.</p>
</li>
<li>
<p>ron.hildebrandt(at)physik.hu-berlin.de</p>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="create-nexus-files-by-python.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Use python to create NeXus files">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Use python to create NeXus files
              </div>
            </div>
          </a>
        
        
          
          <a href="../learn/nexus-primer.html" class="md-footer__link md-footer__link--next" aria-label="Next: A primer on NeXus">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                A primer on NeXus
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.footer", "content.code.copy", "content.code.annotate", "search.suggest"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../javascript.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>